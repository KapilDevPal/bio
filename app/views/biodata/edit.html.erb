<div class="min-h-screen bg-gradient-to-br from-pink-50 to-purple-50 py-8">
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <div class="inline-flex items-center justify-center w-16 h-16 bg-pink-100 rounded-full mb-4">
        <i class="fas fa-edit text-pink-500 text-2xl"></i>
      </div>
      <h1 class="text-4xl font-bold text-gray-900 mb-2">Edit Biodata</h1>
      <p class="text-gray-600 text-lg">Update the details of your beautiful marriage biodata</p>
    </div>

    <%= form_with model: @biodatum, local: true, 
                  data: { controller: "biodata-form" },
                  class: "space-y-8" do |form| %>
      
      <% if @biodatum.errors.any? %>
        <div class="bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg">
          <div class="flex items-center">
            <i class="fas fa-exclamation-triangle mr-3"></i>
<div>
              <h3 class="font-semibold mb-2">Please fix the following errors:</h3>
              <ul class="list-disc list-inside space-y-1">
                <% @biodatum.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          </div>
        </div>
      <% end %>

      <!-- Basic Information Card -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8">
        <div class="flex items-center mb-6">
          <div class="w-10 h-10 bg-pink-100 rounded-lg flex items-center justify-center mr-4">
            <i class="fas fa-user text-pink-500"></i>
          </div>
          <h2 class="text-2xl font-semibold text-gray-900">Basic Information</h2>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="space-y-2">
            <%= form.label :name, "Biodata Name", class: "block text-sm font-semibold text-gray-700" %>
            <%= form.text_field :name, 
                class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-colors", 
                placeholder: "Enter biodata name" %>
          </div>
          
          <div class="space-y-2">
            <%= form.label :background_template, "Background Template", class: "block text-sm font-semibold text-gray-700" %>
            <%= form.select :background_template, 
                Biodatum::BACKGROUND_TEMPLATES.map { |t| [t.titleize, t] }, 
                {}, 
                class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-colors" %>
          </div>
          
          <div class="md:col-span-2 space-y-2">
            <%= form.label :photo, "Upload Photo", class: "block text-sm font-semibold text-gray-700" %>
            <%= form.file_field :photo, 
                accept: "image/*",
                class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-colors" %>
            <p class="text-sm text-gray-500">Supported formats: JPG, PNG, GIF (Max 5MB)</p>
            <% if @biodatum.photo.attached? %>
              <div class="mt-2">
                <p class="text-sm text-gray-600 mb-2">Current photo:</p>
                <%= image_tag @biodatum.photo, class: "w-20 h-20 rounded-lg object-cover border border-gray-300" %>
              </div>
            <% end %>
          </div>
          
          <div class="md:col-span-2 space-y-2">
            <%= form.label :description, "Description", class: "block text-sm font-semibold text-gray-700" %>
            <%= form.text_area :description, 
                rows: 3, 
                class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-colors", 
                placeholder: "Enter a brief description about this biodata" %>
          </div>
        </div>
      </div>

      <!-- Dynamic Sections Card -->
      <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8">
        <div class="flex items-center justify-between mb-6">
          <div class="flex items-center">
            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-4">
              <i class="fas fa-list text-blue-500"></i>
            </div>
            <h2 class="text-2xl font-semibold text-gray-900">Biodata Sections</h2>
          </div>
          <button type="button" 
                  data-action="click->biodata-form#addSection"
                  class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg text-sm font-semibold transition-colors shadow-sm">
            <i class="fas fa-plus mr-2"></i>
            Add Section
          </button>
        </div>

        <div data-biodata-form-target="sectionsContainer" class="space-y-6">
          <%= form.fields_for :biodata_sections do |section_form| %>
            <div class="section-container border border-gray-200 rounded-lg p-6" data-biodata-form-target="section">
              <div class="flex items-center justify-between mb-6">
                <div class="flex-1 mr-6">
                  <%= section_form.label :name, "Section Name", class: "block text-sm font-semibold text-gray-700 mb-2" %>
                  <%= section_form.text_field :name, 
                      class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-colors",
                      placeholder: "e.g., Personal Information, Family Details" %>
                </div>
                <div class="flex items-center space-x-3">
                  <button type="button" 
                          data-action="click->biodata-form#addField"
                          class="add-field-btn bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg text-sm font-semibold transition-colors shadow-sm">
                    <i class="fas fa-plus mr-2"></i>
                    Add Field
                  </button>
                  <button type="button" 
                          data-action="click->biodata-form#removeSection"
                          class="remove-section-btn bg-red-500 hover:bg-red-600 text-white px-4 py-3 rounded-lg text-sm font-semibold transition-colors shadow-sm">
                    <i class="fas fa-trash mr-2"></i>
                    Remove
                  </button>
                </div>
              </div>

              <div data-biodata-form-target="fieldsContainer" class="space-y-4">
                <%= section_form.fields_for :biodata_fields do |field_form| %>
                  <div class="field-container flex items-center space-x-4 p-4 bg-gray-50 rounded-lg border border-gray-200">
                    <div class="flex-1">
                      <%= field_form.label :label, "Field Label", class: "block text-sm font-semibold text-gray-700 mb-2" %>
                      <%= field_form.text_field :label, 
                          class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-colors",
                          placeholder: "e.g., Full Name, Age" %>
                    </div>
                    <div class="flex-1">
                      <%= field_form.label :value, "Field Value", class: "block text-sm font-semibold text-gray-700 mb-2" %>
                      <%= field_form.text_field :value, 
                          class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-colors",
                          placeholder: "Enter the value" %>
                    </div>
                    <div class="w-40">
                      <%= field_form.label :field_type, "Field Type", class: "block text-sm font-semibold text-gray-700 mb-2" %>
                      <%= field_form.select :field_type, 
                          BiodataField::FIELD_TYPES.map { |t| [t.titleize, t] }, 
                          {}, 
                          class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-colors" %>
                    </div>
                    <div class="flex items-end">
                      <button type="button" 
                              data-action="click->biodata-form#removeField"
                              class="remove-field-btn bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-md text-sm font-semibold transition-colors">
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </div>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="text-center py-12 <%= @biodatum.biodata_sections.any? ? 'hidden' : '' %>">
          <div class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
            <i class="fas fa-plus text-gray-400 text-xl"></i>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 mb-2">No sections yet</h3>
          <p class="text-gray-600 mb-4">Start by adding your first section to organize your biodata information</p>
          <button type="button" 
                  data-action="click->biodata-form#addSection"
                  class="bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 rounded-lg text-sm font-semibold transition-colors shadow-sm">
            <i class="fas fa-plus mr-2"></i>
            Add Your First Section
          </button>
        </div>
      </div>

      <!-- Submit Buttons -->
      <div class="flex justify-end space-x-4 pt-6">
        <%= link_to biodatum_path(@biodatum), 
            class: "px-8 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-semibold" do %>
          <i class="fas fa-arrow-left mr-2"></i>
          Cancel
        <% end %>
        <%= form.submit "Update Biodata", 
            class: "bg-pink-500 hover:bg-pink-600 text-white font-semibold py-3 px-8 rounded-lg transition-colors shadow-sm" %>
      </div>
    <% end %>
  </div>
</div>
